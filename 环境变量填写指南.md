# SaaSfly 环境变量填写指南

本文档详细解释了 `.env.local` 文件中各个环境变量的用途以及如何获取或生成相应的值。

## 1. 应用基础配置

### NEXT_PUBLIC_APP_URL
- **用途**：应用的公共 URL，用于生成链接和回调地址
- **本地开发**：保持为 `'http://localhost:3000'`
- **生产环境**：修改为您的实际域名，例如 `'https://yourdomain.com'`

## 2. 认证配置 (NextAuth.js)

### NEXTAUTH_URL
- **用途**：NextAuth.js 的认证 URL
- **填写方法**：与 NEXT_PUBLIC_APP_URL 保持一致

### NEXTAUTH_SECRET
- **用途**：用于加密会话数据的密钥
- **生成方法**：在终端中运行以下命令生成
  ```bash
  openssl rand -base64 32
  ```
- **示例值**：生成的随机字符串，如 `30U9MVubAYj/ML+Vli7rIcBBS5Ch7V+DsXqua1brEds=`

### GITHUB_CLIENT_ID 和 GITHUB_CLIENT_SECRET
- **用途**：GitHub OAuth 认证所需的凭据
- **获取方法**：
  1. 访问 [GitHub Developer Settings](https://github.com/settings/developers)
  2. 点击 "New OAuth App"
  3. 填写应用信息，授权回调 URL 设置为 `${NEXTAUTH_URL}/api/auth/callback/github`
  4. 创建后即可获取 Client ID 和 Client Secret

## 3. 邮件配置 (RESEND)

### RESEND_API_KEY
- **用途**：Resend 邮件服务的 API 密钥
- **获取方法**：
  1. 访问 [Resend 官网](https://resend.com)
  2. 注册并登录账户
  3. 在 API Keys 页面创建新的 API 密钥

### RESEND_FROM
- **用途**：发送邮件时使用的发件人邮箱地址
- **填写方法**：使用您在 Resend 验证过的域名邮箱，例如 `'no-reply@yourdomain.com'`

## 4. 订阅配置 (Stripe)

### STRIPE_API_KEY
- **用途**：Stripe 支付平台的 API 密钥
- **获取方法**：
  1. 访问 [Stripe Dashboard](https://dashboard.stripe.com)
  2. 登录账户
  3. 在 Developers > API keys 页面获取

### STRIPE_WEBHOOK_SECRET
- **用途**：验证 Stripe webhook 请求的签名密钥
- **获取方法**：
  1. 在 Stripe Dashboard 中创建 webhook
  2. 设置端点 URL 为 `${NEXTAUTH_URL}/api/webhooks/stripe`
  3. 创建后 Stripe 会提供 webhook secret

### 产品和价格 ID 变量
包括以下变量：
- NEXT_PUBLIC_STRIPE_STD_PRODUCT_ID
- NEXT_PUBLIC_STRIPE_STD_MONTHLY_PRICE_ID
- NEXT_PUBLIC_STRIPE_PRO_PRODUCT_ID
- NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID
- NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID
- NEXT_PUBLIC_STRIPE_BUSINESS_PRODUCT_ID
- NEXT_PUBLIC_STRIPE_BUSINESS_MONTHLY_PRICE_ID
- NEXT_PUBLIC_STRIPE_BUSINESS_YEARLY_PRICE_ID

- **用途**：定义不同订阅计划的产品和价格标识符
- **获取方法**：
  1. 在 Stripe Dashboard 中创建产品和相应的价格
  2. 创建后，从产品和价格的详情页面复制 ID

## 5. 分析工具配置 (PostHog)

### NEXT_PUBLIC_POSTHOG_KEY
- **用途**：PostHog 分析工具的 API 密钥
- **获取方法**：
  1. 访问 [PostHog 官网](https://posthog.com)
  2. 注册并创建项目
  3. 在项目设置中获取 API 密钥

### NEXT_PUBLIC_POSTHOG_HOST
- **用途**：PostHog 服务的主机地址
- **默认值**：`https://app.posthog.com`（使用 PostHog 云服务时）
- **自托管**：如果自托管 PostHog，修改为您的自托管地址

## 6. 管理员账户配置

### ADMIN_EMAIL
- **用途**：定义系统管理员的邮箱地址
- **填写方法**：可以设置多个邮箱，用逗号分隔，例如 `"admin@yourdomain.com,root@yourdomain.com"`

## 7. 调试配置

### IS_DEBUG
- **用途**：控制 NextAuth.js 是否启用调试模式
- **取值**：`true` 或 `false`
- **建议**：开发环境可以设置为 `true`，生产环境应设置为 `false`

## 8. 数据库配置

### POSTGRES_URL
- **用途**：PostgreSQL 数据库的连接字符串
- **当前值**：文件中已有一个 Supabase 数据库连接字符串
- **自定义数据库**：如需使用自己的数据库，按以下格式填写
  ```
  postgresql://{USER}:{PASSWORD}@{DB_HOST}:{DB_PORT}/{DATABASE}
  ```

## 9. 扣子工作流配置

### COZE_API_TOKEN
- **用途**：扣子平台的 API 访问令牌
- **获取方法**：在扣子平台的个人设置或开发者中心获取

### COZE_WORKFLOW_ID
- **用途**：扣子工作流的唯一标识符
- **获取方法**：在扣子平台创建工作流后，从工作流详情页面获取

## 10. 注意事项

1. 所有敏感信息（如密钥和密码）不应提交到代码仓库
2. 确保 `.env.local` 文件已添加到 `.gitignore` 中
3. 不同环境（开发、测试、生产）应使用不同的环境变量配置
4. 环境变量修改后，需要重启应用才能生效