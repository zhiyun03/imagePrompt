<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google ç™»å½•æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background-color: #357ae8; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Google ç™»å½•åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section success">
        <h2>âœ… ç¯å¢ƒé…ç½®æ£€æŸ¥</h2>
        <p>Google OAuth å‡­æ®å·²æ­£ç¡®é…ç½®åœ¨ .env.local æ–‡ä»¶ä¸­</p>
        <p>Client ID: 590391951259-4e8f2pd3mjhjq5dldiddlvsvvmqopc22.apps.googleusercontent.com</p>
    </div>

    <div class="test-section warning">
        <h2>âš ï¸ æµ‹è¯• Google ç™»å½•</h2>
        <p>ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®æµ‹è¯• Google ç™»å½•åŠŸèƒ½ï¼š</p>
        
        <!-- ç›´æ¥æµ‹è¯• Google OAuth æˆæƒç«¯ç‚¹ -->
        <button onclick="testDirectGoogleAuth()">æµ‹è¯•ç›´æ¥ Google OAuth</button>
        
        <!-- æµ‹è¯• NextAuth.js ç™»å½•ç«¯ç‚¹ -->
        <button onclick="testNextAuthSignIn()">æµ‹è¯• NextAuth.js ç™»å½•</button>
        
        <p><small>æ³¨æ„ï¼šè¿™äº›æµ‹è¯•å°†åœ¨æ–°çª—å£æ‰“å¼€ï¼Œè¯·å…è®¸å¼¹å‡ºçª—å£</small></p>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ é…ç½®éªŒè¯æ¸…å•</h2>
        <ol>
            <li>âœ… Google OAuth å‡­æ®å·²é…ç½®</li>
            <li>âœ… ç¯å¢ƒå˜é‡å·²åŠ è½½</li>
            <li>âš ï¸ è¯·éªŒè¯ Google Cloud Console é…ç½®ï¼š
                <ul>
                    <li>å·²æ·»åŠ æˆæƒé‡å®šå‘ URI: <code>http://localhost:3000/api/auth/callback/google</code></li>
                    <li>OAuth åŒæ„å±å¹•å·²é…ç½®</li>
                    <li>Google+ API å·²å¯ç”¨</li>
                </ul>
            </li>
            <li>âš ï¸ æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</li>
        </ol>
    </div>

    <script>
        function testDirectGoogleAuth() {
            // ç›´æ¥æµ‹è¯• Google OAuth æˆæƒç«¯ç‚¹
            const params = new URLSearchParams({
                client_id: '590391951259-4e8f2pd3mjhjq5dldiddlvsvvmqopc22.apps.googleusercontent.com',
                redirect_uri: 'http://localhost:3000/api/auth/callback/google',
                response_type: 'code',
                scope: 'openid email profile',
                access_type: 'offline',
                prompt: 'consent'
            });
            
            window.open(`https://accounts.google.com/o/oauth2/v2/auth?${params.toString()}`, '_blank');
        }

        function testNextAuthSignIn() {
            // æµ‹è¯• NextAuth.js ç™»å½•ç«¯ç‚¹
            window.open('http://localhost:3000/api/auth/signin?provider=google', '_blank');
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥å¼€å‘æœåŠ¡å™¨çŠ¶æ€
        fetch('http://localhost:3000/api/auth/session')
            .then(response => response.json())
            .then(data => {
                console.log('å¼€å‘æœåŠ¡å™¨çŠ¶æ€:', data);
            })
            .catch(error => {
                console.error('å¼€å‘æœåŠ¡å™¨è¿æ¥å¤±è´¥:', error);
            });
    </script>
</body>
</html>